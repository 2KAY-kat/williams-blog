import{B as m,s as C}from"./utils-CTkCsTWQ.js";import"./index-CsxmzJuP.js";function A(o){const s=o.trim().split(/\s+/).length;return Math.ceil(s/200)}document.addEventListener("DOMContentLoaded",async function(){const o=document.getElementById("page-loading-overlay"),n=document.getElementById("skeleton-state"),s=document.getElementById("error-state"),r=document.getElementById("post-container"),p=document.getElementById("page-title"),g=document.getElementById("post-title"),u=document.getElementById("post-category"),y=document.getElementById("post-author"),E=document.getElementById("post-date"),h=document.getElementById("post-reading-time"),c=document.getElementById("post-image"),f=document.getElementById("post-content"),I=document.getElementById("error-message-text"),a=e=>{n&&(n.style.display="none"),o&&o.classList.add("hidden"),s&&(s.style.display="block"),I.textContent=e,C(e,"error")},i=new URLSearchParams(window.location.search).get("id");if(!i){a("Error: No post ID provided in the URL.");return}const B=`${m}/public/post/${i}`;try{const e=await fetch(B);if(!e.ok){const w=await e.json().catch(()=>({message:"Failed to parse error response."}));a(`Post not found (Status ${e.status}). ${w.message||"Check the console for details."}`);return}const l=await e.json(),t=l.data||l;p.textContent=`${t.title||"Post"} | Williams Kaphika`,g.textContent=t.title||"Untitled Post",u.textContent=Array.isArray(t.categories)&&t.categories.length>0?t.categories[0].toUpperCase():"GENERAL",y.innerHTML=`<i class="fas fa-user"></i> ${t.author_name||"Anonymous Author"}`;const L=t.created_at?new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";E.innerHTML=`<i class="fas fa-calendar-alt"></i> ${L}`;const d=t.post_content||t.content||"<p>No content available for this post.</p>";f.innerHTML=d;const T=A(d);h.innerHTML=`<i class="fas fa-clock"></i> ${T} min read`,t.main_image_url?c.src=m+t.main_image_url:c.src=`https://placehold.co/800x400/cccccc/333333?text=${encodeURIComponent(t.title||"Article")}`,n&&(n.style.display="none"),o&&o.classList.add("hidden"),r.style.display="block"}catch(e){console.error("Error fetching post:",e),a(`Network or server connection error: ${e.message}.`)}});
