import{B as r,s as C}from"./utils-TR1j_de-.js";import"./index-ClKxXFVO.js";function _(o){const s=o.trim().split(/\s+/).length;return Math.ceil(s/200)}document.addEventListener("DOMContentLoaded",async function(){const o=document.getElementById("page-loading-overlay"),n=document.getElementById("skeleton-state"),s=document.getElementById("error-state"),i=document.getElementById("post-container"),p=document.getElementById("page-title"),g=document.getElementById("post-title"),u=document.getElementById("post-category"),y=document.getElementById("post-author"),E=document.getElementById("post-date"),f=document.getElementById("post-reading-time"),c=document.getElementById("post-image"),h=document.getElementById("post-content"),I=document.getElementById("error-message-text"),a=e=>{n&&(n.style.display="none"),o&&o.classList.add("hidden"),s&&(s.style.display="block"),I.textContent=e,C(e,"error")},l=new URLSearchParams(window.location.search).get("id");if(!l){a("Error: No post ID provided in the URL.");return}const B=`${r}/public/post/${l}`;try{const e=await fetch(B);if(!e.ok){const w=await e.json().catch(()=>({message:"Failed to parse error response."}));a(`Post not found (Status ${e.status}). ${w.message||"Check the console for details."}`);return}const d=await e.json(),t=d.data||d;p.textContent=`${t.title||"Post"} | Williams Kaphika`,g.textContent=t.title||"Untitled Post",u.textContent=Array.isArray(t.categories)&&t.categories.length>0?t.categories[0].toUpperCase():"GENERAL",y.innerHTML=`<i class="fas fa-user"></i> ${t.author_name||"Anonymous Author"}`;const L=t.created_at?new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";E.innerHTML=`<i class="fas fa-calendar-alt"></i> ${L}`;const m=t.post_content||t.content||"<p>No content available for this post.</p>";h.innerHTML=m;const T=_(m);f.innerHTML=`<i class="fas fa-clock"></i> ${T} min read`,t.main_image_url?c.src=r+t.main_image_url:c.src=`${r}/uploads/placeholder.png`,n&&(n.style.display="none"),o&&o.classList.add("hidden"),i.style.display="block"}catch(e){console.error("Error fetching post:",e),a(`Network or server connection error: ${e.message}.`)}});
